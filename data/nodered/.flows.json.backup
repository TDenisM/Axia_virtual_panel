[{"id":"2b34f6d7.bc7e8a","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"50cf6fac.5fc8b","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"908b7f3a.1fb28","type":"ui_tab","z":"","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"7c9fdfe4.35b54","type":"ui_group","z":"","name":"Default","tab":"908b7f3a.1fb28","order":1,"disp":true,"width":"6","collapse":false},{"id":"4e8ea362.42c63c","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"4b4eea72.21c1d4","type":"ui_tab","z":"","name":"UI2","icon":"dashboard","disabled":false,"hidden":false},{"id":"9ead6f7d.bea62","type":"ui_group","z":"","name":"Default","tab":"4b4eea72.21c1d4","order":1,"disp":true,"width":"6","collapse":false},{"id":"d32910a.c6f6cf","type":"tcp in","z":"2b34f6d7.bc7e8a","name":"Server holding connections at :1025","server":"server","host":"","port":"1025","datamode":"stream","datatype":"utf8","newline":"\\r\\n","topic":"text","base64":false,"x":180,"y":300,"wires":[["124a2946.e93b87","daead1d0.a691d"]]},{"id":"1a4438e8.f27ad7","type":"tcp out","z":"2b34f6d7.bc7e8a","host":"","port":"","beserver":"reply","base64":false,"end":false,"name":"reply: all open connections will be messaged","x":1310,"y":300,"wires":[]},{"id":"124a2946.e93b87","type":"function","z":"2b34f6d7.bc7e8a","name":"Pathfinder reply","func":"switch (msg.payload) {\n    case 'GET supv state':\n        msg.payload = 'INDI SUPV VERSION=\"1.2.2e\", STATE=Ready\\r\\n';\n        break;\n    case 'GET AppControl ShowProfList':\n        msg.payload = 'ACK $STATUS=UNKNOWN_OBJECT\\r\\n';\n        break;\n    case 'LOGIN unit user=\"user\",pwd=\"\"':\n        msg.payload = 'ACK $STATUS=UNKNOWN_OBJECT\\r\\n';\n        break;\n    case 'GET AppControl ShowProfID,ShowProfName,ShowProfStat':\n        msg.payload = 'ACK $STATUS=UNKNOWN_OBJECT\\r\\n';\n        break;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":300,"wires":[["1a4438e8.f27ad7"]]},{"id":"2f74ed9e.fe74c2","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"7c9fdfe4.35b54","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"1","payloadType":"num","topic":"","x":810,"y":420,"wires":[["c2ebdb4a.652a08"]]},{"id":"9c0830c8.28f19","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"7c9fdfe4.35b54","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"2","payloadType":"num","topic":"","x":810,"y":480,"wires":[["c2ebdb4a.652a08"]]},{"id":"9addf524.e01f48","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"7c9fdfe4.35b54","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"3","payloadType":"num","topic":"","x":810,"y":540,"wires":[["c2ebdb4a.652a08"]]},{"id":"daead1d0.a691d","type":"function","z":"2b34f6d7.bc7e8a","name":"Main processor","func":"if (msg.payload.startsWith('SET ')) {\n    let re = /.+MOD_USER#(?<user>\\d+).BUT#(?<button>\\d+) (?<command>\\S+)=(?<value>.+)/gm;\n    let match = re.exec(msg.payload);\n    if (match) {\n        switch (match.groups.command) {\n            case 'BACKCOLORON':\n                let bgONcol = match.groups.value.slice(1,-1);\n                let [bgON_r, bgON_g, bgON_b] = bgONcol.split(',');\n                let bgON_r_hex = parseInt(bgON_r).toString(16);\n                let bgON_g_hex = parseInt(bgON_g).toString(16);\n                let bgON_b_hex = parseInt(bgON_b).toString(16);\n                context.global.buttons[match.groups.button].backcoloron = '#' + (bgON_r_hex.length < 2 ? '0' + bgON_r_hex : bgON_r_hex) + (bgON_g_hex.length < 2 ? '0' + bgON_g_hex : bgON_g_hex) + (bgON_b_hex.length < 2 ? '0' + bgON_b_hex : bgON_b_hex);\n                break;\n            case 'BACKCOLOROFF':\n                let bgOFFcol = match.groups.value.slice(1,-1);\n                let [bgOFF_r, bgOFF_g, bgOFF_b] = bgOFFcol.split(',');\n                let bgOFF_r_hex = parseInt(bgOFF_r).toString(16);\n                let bgOFF_g_hex = parseInt(bgOFF_g).toString(16);\n                let bgOFF_b_hex = parseInt(bgOFF_b).toString(16);\n                context.global.buttons[match.groups.button].backcoloroff = '#' + (bgOFF_r_hex.length < 2 ? '0' + bgOFF_r_hex : bgOFF_r_hex) + (bgOFF_g_hex.length < 2 ? '0' + bgOFF_g_hex : bgOFF_g_hex) + (bgOFF_b_hex.length < 2 ? '0' + bgOFF_b_hex : bgOFF_b_hex);\n                break;\n            case 'TEXT':\n                context.global.buttons[match.groups.button].text = match.groups.value.slice(1,-1);\n                break;\n            case 'IND':\n                context.global.buttons[match.groups.button].ind = match.groups.value;\n        }\n    } else {\n        node.warn('Regexp is null: ' + msg.payload);\n    }\n}\n\nfor (let idx in context.global.buttons) {\n    if (context.global.buttons[idx]) {\n        context.global.buttons[idx].update();\n        if (context.global.buttons[idx].updated) {\n            node.send(context.global.buttons[idx].state());\n        }\n    }\n}","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is deployed.\n\nclass button {\n    constructor(id) {\n        this._backcoloron = '#FFFFFF';\n        this._backcoloroff = '#000000';\n        this._ind = 'OFF';\n        this._text = '';\n        this._lastupdate = Date.now();\n        this._updated = false;\n        this._bgstate = false;\n        this._id = id;\n    }\n    \n    get backcoloron() {\n        return this._backcoloron;\n    }\n    \n    set backcoloron(value) {\n        this._backcoloron = value;\n        // this._updated = true;\n    }\n    \n    get backcoloroff() {\n        return this._backcoloroff;\n    }\n    \n    set backcoloroff(value) {\n        this._backcoloroff = value;\n        this._updated = true;\n    }\n    \n    get ind() {\n        return this._ind;\n    }\n    \n    set ind(value) {\n        this._ind = value;\n        switch (value) {\n            case 'ON':\n                this._bgstate = true;\n                break;\n            case 'OFF':\n                this._bgstate = false;\n                break;\n        }\n        this._updated = true;\n    }\n    \n    get text() {\n        return this._text;\n    }\n    \n    set text(value) {\n        this._text = value;\n        this._updated = true;\n    }\n    \n    get updated() {\n        return this._updated;\n    }\n    \n    get bgstate() {\n        return this._bgstate;\n    }\n    \n    update() {\n        if (this._ind == 'FLASH') {\n            if ((Date.now() - this._lastupdate) > 500) {\n                this._bgstate = !this._bgstate;\n                this._updated = true;\n                this._lastupdate = Date.now();\n            }\n        }\n    }\n    \n    state() {\n        this._updated = false;\n        let state = {};\n        switch (this._ind) {\n          case 'ON':\n            state.bgcol = this._backcoloron;\n            break;\n          case 'OFF':\n            state.bgcol = this._backcoloroff;\n            break;\n          case 'FLASH':\n            if (this._bgstate) {\n                state.bgcol = this._backcoloron;\n            } else {\n                state.bgcol = this._backcoloroff;\n            }\n            break;\n        }\n        state.label = this._text;\n        state.id = this._id;\n        return state;\n    }\n}\n\nlet buttons = [];\n\nfor (var i=1;i<18;i++) {\n    buttons[i] = new button(i);\n}\n\ncontext.global.buttons = buttons;","finalize":"","x":450,"y":480,"wires":[["175b584d.61d0f8","47fbac63.474064","11304e66.e8f192","9bec307a.7470c","9780cf54.214ee","f22d67fc.911018"]]},{"id":"89b8f84e.36af38","type":"inject","z":"2b34f6d7.bc7e8a","name":"updater","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"0.1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":240,"y":480,"wires":[["daead1d0.a691d"]]},{"id":"175b584d.61d0f8","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":420,"wires":[["2f74ed9e.fe74c2"]]},{"id":"c2ebdb4a.652a08","type":"function","z":"2b34f6d7.bc7e8a","name":"Button pressed","func":"function up() {\n    node.send({payload:`\\r\\nEVENT MOD_USER#1.BUT#${msg.payload} KEY=UP \\r\\n`});\n}\n\nfunction down() {\n    node.send({payload:`\\r\\nEVENT MOD_USER#1.BUT#${msg.payload} KEY=DOWN \\r\\n`});\n    setTimeout(up, 50);\n}\n\n// let test = new Buffer(`EVENT MOD_USER#1.BUT#${msg.payload} KEY=DOWN\\r\\nEVENT MOD_USER#1.BUT#${msg.payload} KEY=UP \\r\\n`, 'base64');\n\ndown();","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1060,"y":480,"wires":[["1a4438e8.f27ad7"]]},{"id":"47fbac63.474064","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":480,"wires":[["9c0830c8.28f19"]]},{"id":"11304e66.e8f192","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"3","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":540,"wires":[["9addf524.e01f48"]]},{"id":"f0917ee1.e869c","type":"status","z":"2b34f6d7.bc7e8a","name":"","scope":["d32910a.c6f6cf"],"x":100,"y":180,"wires":[["52c3319e.c69ef"]]},{"id":"52c3319e.c69ef","type":"ui_text","z":"2b34f6d7.bc7e8a","group":"7c9fdfe4.35b54","order":3,"width":0,"height":0,"name":"","label":"{{msg.status.text}}","format":"","layout":"row-spread","x":310,"y":140,"wires":[]},{"id":"6fc8aeb7.01ced","type":"inject","z":"2b34f6d7.bc7e8a","name":"","props":[{"p":"status.text","v":"Disconnected","vt":"str"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","x":110,"y":100,"wires":[["52c3319e.c69ef"]]},{"id":"59d78c86.a8a704","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"9ead6f7d.bea62","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"4","payloadType":"num","topic":"","x":810,"y":680,"wires":[["c2ebdb4a.652a08"]]},{"id":"354caa2.b851956","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"9ead6f7d.bea62","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"5","payloadType":"num","topic":"","x":810,"y":740,"wires":[["c2ebdb4a.652a08"]]},{"id":"a5b087fe.c228a8","type":"ui_button","z":"2b34f6d7.bc7e8a","name":"","group":"9ead6f7d.bea62","order":0,"width":0,"height":0,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"#000000","bgcolor":"{{msg.bgcol}}","icon":"","payload":"6","payloadType":"num","topic":"","x":810,"y":800,"wires":[["c2ebdb4a.652a08"]]},{"id":"9bec307a.7470c","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"4","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":680,"wires":[["59d78c86.a8a704"]]},{"id":"9780cf54.214ee","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"5","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":740,"wires":[["354caa2.b851956"]]},{"id":"f22d67fc.911018","type":"switch","z":"2b34f6d7.bc7e8a","name":"","property":"id","propertyType":"msg","rules":[{"t":"eq","v":"6","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":800,"wires":[["a5b087fe.c228a8"]]},{"id":"2b55dd0d.03d9e2","type":"uibuilder","z":"50cf6fac.5fc8b","name":"","topic":"","url":"unit3","fwdInMessages":false,"allowScripts":false,"allowStyles":false,"copyIndex":true,"showfolder":false,"x":490,"y":220,"wires":[["94aca2b9.7dacb"],[]]},{"id":"e3703731.f20068","type":"inject","z":"50cf6fac.5fc8b","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":210,"y":180,"wires":[["2b55dd0d.03d9e2"]]},{"id":"94aca2b9.7dacb","type":"debug","z":"50cf6fac.5fc8b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":660,"y":160,"wires":[]},{"id":"7561be06.04bec","type":"uibuilder","z":"50cf6fac.5fc8b","name":"","topic":"","url":"test","fwdInMessages":false,"allowScripts":false,"allowStyles":false,"copyIndex":true,"showfolder":false,"x":490,"y":320,"wires":[[],[]]},{"id":"a686768e.efaf18","type":"inject","z":"50cf6fac.5fc8b","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":230,"y":360,"wires":[["7561be06.04bec"]]},{"id":"678cf169.6f138","type":"debug","z":"50cf6fac.5fc8b","name":"jquery-debug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":520,"wires":[]},{"id":"48c0ed14.4b53e4","type":"uibuilder","z":"50cf6fac.5fc8b","name":"jQuery Example","topic":"","url":"jq","fwdInMessages":false,"allowScripts":false,"allowStyles":false,"copyIndex":true,"showfolder":false,"x":620,"y":540,"wires":[["678cf169.6f138"],["9c5ed3d.392223"]]},{"id":"df243fe0.f1441","type":"inject","z":"50cf6fac.5fc8b","name":"","repeat":"","crontab":"","once":false,"onceDelay":"","topic":"uibuilder-jquery","payload":"{\"lib\":\"jquery\", \"testNum\": 500}","payloadType":"json","x":480,"y":540,"wires":[["48c0ed14.4b53e4"]]},{"id":"9c5ed3d.392223","type":"debug","z":"50cf6fac.5fc8b","name":"uib controls","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":560,"wires":[]},{"id":"74dafa4.50de604","type":"comment","z":"50cf6fac.5fc8b","name":"uibuilder/jQuery Example","info":"[Front-End](/jq)\n\n## Configuration\n\nInstall jQuery via the nodes configuration panel.\n\nThen update the files:\n\n* `index.html`\n* `index.js`\n* `index.css`\n\nAccording to the jQuery example(s) in the \n[WIKI](https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/Example:-JQuery)\nwhich are also included in the 3 other comment nodes in this example.","x":470,"y":480,"wires":[]},{"id":"47522494.6d706c","type":"comment","z":"50cf6fac.5fc8b","name":"index.html","info":"<!doctype html>\n<html lang=\"en\"><head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes\">\n\n    <title>uibuilder jQuery example</title>\n    <meta name=\"description\" content=\"Node-RED uibuilder - Example using jQuery\">\n\n    <link rel=\"icon\" href=\"./images/node-blue.ico\">\n\n    <!-- OPTIONAL: Normalize is used to make things the same across browsers. Index is for your styles -->\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"../uibuilder/vendor/normalize.css/normalize.css\">\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"./index.css\" media=\"all\">\n\n</head><body>\n    <!-- The \"app\" element is where the code for dynamic updates is attached -->\n    <div id=\"app\">\n        <h1>\n            Welcome to UIbuilder for Node-RED\n        </h1>\n        <p>\n            This is an example of using uibuilder with jQuery. If you open the developer console, you will see some debug output.\n            You can also see some dynamic data updating below, thanks to JQuery.\n            Additional information may be available in the\n            <a href=\"https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/Example:-JQuery\">WIKI</a>\n        </p>\n        <p>\n            Please see the README for the\n            <a href=\"https://github.com/TotallyInformation/node-red-contrib-uibuilder\">node-red-contrib-uibuilder</a>\n            node for details on how to use uibuilder.\n        </p>\n        <h2>Dynamic Data (via JQuery)</h2>\n        <p>UIBuilder Front-End Version: <span id=\"feVersion\"></span></p>\n        <p>Websocket State: <span id=\"socketConnectedState\"></span></p>\n        <p>Messages Received: <span id=\"msgsReceived\"></span></p>\n        <p>Control Messages Received: <span id=\"msgsControl\"></span></p>\n        <p>Messages Sent: <span id=\"msgsSent\"></span></p>\n        <p>Last Message Received:</p>\n        <code id=\"showMsg\"></code>\n        <p>Last Control Message Received:</p>\n        <code id=\"showCtrlMsg\"></code>\n        <p>Last Message Sent:</p>\n        <code id=\"showMsgSent\"></code>\n    </div>\n    <!-- These MUST be in the right order. Note no leading / -->\n    <!-- REQUIRED: Socket.IO is loaded only once for all instances\n                     Without this, you don't get a websocket connection -->\n    <script src=\"../uibuilder/vendor/socket.io/socket.io.js\"></script>\n\n    <!-- --- Vendor Libraries - Load in the right order --- -->\n    <script src=\"../uibuilder/vendor/jquery/dist/jquery.min.js\"></script>\n\n    <!-- REQUIRED: Sets up Socket listeners and the msg object -->\n    <!-- <script src=\"./uibuilderfe.js\"></script>   //dev version -->\n    <script src=\"./uibuilderfe.min.js\"></script> <!--    //prod version -->\n    <!-- OPTIONAL: Put your custom code in here -->\n    <script src=\"./index.js\"></script>\n\n</body></html>\n","x":660,"y":480,"wires":[],"icon":"node-red/parser-html.svg"},{"id":"e1f05343.fe008","type":"comment","z":"50cf6fac.5fc8b","name":"index.js","info":"/* jshint browser: true, esversion: 5, asi: true */\n/*globals $, uibuilder */\n// @ts-nocheck\n/*\n  Copyright (c) 2019 Julian Knight (Totally Information)\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n  http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n'use strict'\n\n/** @see https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/Front-End-Library---available-properties-and-methods */\n\n// When JQuery is ready, update\n$( document ).ready(function() {\n    /** **REQUIRED** Start uibuilder comms with Node-RED @since v2.0.0-dev3\n     * Pass the namespace and ioPath variables if hosting page is not in the instance root folder\n     * e.g. If you get continual `uibuilderfe:ioSetup: SOCKET CONNECT ERROR` error messages.\n     * e.g. uibuilder.start('/nr/uib', '/nr/uibuilder/vendor/socket.io') // change to use your paths/names\n     */\n    uibuilder.start()\n\n    // Initial set\n    $('#msgsReceived').text( uibuilder.get('msgsReceived') )\n    $('#msgsControl').text( uibuilder.get('msgsCtrl') )\n    $('#msgsSent').text( uibuilder.get('msgsSent') )\n    $('#socketConnectedState').text( uibuilder.get('ioConnected') )\n    $('#feVersion').text( uibuilder.get('version') )\n\n    // Turn on debugging (default is off)\n    //uibuilder.debug(true)\n\n    // If msg changes - msg is updated when a standard msg is received from Node-RED over Socket.IO\n    // Note that you can also listen for 'msgsReceived' as they are updated at the same time\n    // but newVal relates to the attribute being listened to.\n    uibuilder.onChange('msg', function(newVal){\n        console.info('property msg changed!')\n        console.dir(newVal)\n        $('#showMsg').text(JSON.stringify(newVal))\n        //uibuilder.set('msgCopy', newVal)\n    })\n\n    // You can get attributes manually. Non-existent attributes return 'undefined'\n    //console.dir(uibuilder.get('msg'))\n\n    // You can also set things manually. See the list of attributes top of page.\n    // You can add arbitrary attributes to the object, you cannot overwrite internal attributes\n\n    // Try setting a restricted, internal attribute - see the warning in the browser console\n    uibuilder.set('msg', 'You tried but failed!')\n\n    // Remember that onChange functions don't trigger if you haven't set them\n    // up BEFORE an attribute change.\n    uibuilder.onChange('msgCopy', function(newVal){\n        console.info('msgCopy changed. New value: ', newVal)\n    })\n\n    // Now try setting a new attribute - this will be an empty object because\n    // msg won't yet have been received\n    uibuilder.set('msgCopy', uibuilder.msg)\n    // Hint: Try putting this set into the onChange for 'msg'\n\n    // As noted, we could get the msg here too\n    uibuilder.onChange('msgsReceived', function(newVal){\n        console.info('New msg sent to us from Node-RED over Socket.IO. Total Count: ', newVal)\n        $('#msgsReceived').text(newVal)\n        // uibuilder.msg is a shortcut for uibuilder.get('msg')\n        //$('#showMsg').text(JSON.stringify(uibuilder.msg))\n    })\n\n    // If Socket.IO connects/disconnects\n    uibuilder.onChange('ioConnected', function(newVal){\n        console.info('Socket.IO Connection Status Changed: ', newVal)\n        $('#socketConnectedState').text(newVal)\n    })\n\n    // If a message is sent back to Node-RED\n    uibuilder.onChange('msgsSent', function(newVal){\n        console.info('New msg sent to Node-RED over Socket.IO. Total Count: ', newVal)\n        $('#msgsSent').text(newVal)\n        $('#showMsgSent').text(JSON.stringify(uibuilder.get('sentMsg')))\n    })\n\n    // If we receive a control message from Node-RED\n    uibuilder.onChange('msgsCtrl', function(newVal){\n        console.info('New control msg sent to us from Node-RED over Socket.IO. Total Count: ', newVal)\n        $('#msgsControl').text(newVal)\n        $('#showCtrlMsg').text(JSON.stringify(uibuilder.get('ctrlMsg')))\n    })\n\n    //Manually send a message back to Node-RED after 2 seconds\n    window.setTimeout(function(){\n        console.info('Sending a message back to Node-RED - after 2s delay')\n        uibuilder.send( { 'topic':'uibuilderfe', 'payload':'I am a message sent from the uibuilder front end' } )\n    }, 2000)\n\n}) // --- End of JQuery Ready --- //\n\n// EOF\n","x":790,"y":480,"wires":[],"icon":"font-awesome/fa-code"},{"id":"7c84d9b4.d17538","type":"comment","z":"50cf6fac.5fc8b","name":"index.css","info":"body {font-family: sans-serif;}\ndiv, p, code { margin:0.3em; padding: 0.3em;}","x":920,"y":480,"wires":[],"icon":"node-red/hash.svg"}]